{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.InlineExecutor = exports.QueueExecutor = void 0;\n\nconst queue_1 = require(\"../../../throttler/queue\");\n\nasync function handler(op) {\n  var _a, _b, _c, _d, _e, _f;\n\n  try {\n    op.result = await op.func();\n  } catch (err) {\n    const code = err.status || err.code || ((_b = (_a = err.context) === null || _a === void 0 ? void 0 : _a.response) === null || _b === void 0 ? void 0 : _b.statusCode) || ((_c = err.original) === null || _c === void 0 ? void 0 : _c.code) || ((_f = (_e = (_d = err.original) === null || _d === void 0 ? void 0 : _d.context) === null || _e === void 0 ? void 0 : _e.response) === null || _f === void 0 ? void 0 : _f.statusCode);\n\n    if (code === 429 || code === 409) {\n      throw err;\n    }\n\n    op.error = err;\n  }\n\n  return;\n}\n\nclass QueueExecutor {\n  constructor(options) {\n    this.queue = new queue_1.Queue(Object.assign(Object.assign({}, options), {\n      handler\n    }));\n  }\n\n  async run(func) {\n    const op = {\n      func\n    };\n    await this.queue.run(op);\n\n    if (op.error) {\n      throw op.error;\n    }\n\n    return op.result;\n  }\n\n}\n\nexports.QueueExecutor = QueueExecutor;\n\nclass InlineExecutor {\n  run(func) {\n    return func();\n  }\n\n}\n\nexports.InlineExecutor = InlineExecutor;","map":{"version":3,"sources":["C:/Users/Sharik/Desktop/Projects/ReactProject/my-first-app/node_modules/firebase-tools/lib/deploy/functions/release/executor.js"],"names":["Object","defineProperty","exports","value","InlineExecutor","QueueExecutor","queue_1","require","handler","op","_a","_b","_c","_d","_e","_f","result","func","err","code","status","context","response","statusCode","original","error","constructor","options","queue","Queue","assign","run"],"mappings":"AAAA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;AACAD,OAAO,CAACE,cAAR,GAAyBF,OAAO,CAACG,aAAR,GAAwB,KAAK,CAAtD;;AACA,MAAMC,OAAO,GAAGC,OAAO,CAAC,0BAAD,CAAvB;;AACA,eAAeC,OAAf,CAAuBC,EAAvB,EAA2B;AACvB,MAAIC,EAAJ,EAAQC,EAAR,EAAYC,EAAZ,EAAgBC,EAAhB,EAAoBC,EAApB,EAAwBC,EAAxB;;AACA,MAAI;AACAN,IAAAA,EAAE,CAACO,MAAH,GAAY,MAAMP,EAAE,CAACQ,IAAH,EAAlB;AACH,GAFD,CAGA,OAAOC,GAAP,EAAY;AACR,UAAMC,IAAI,GAAGD,GAAG,CAACE,MAAJ,IACTF,GAAG,CAACC,IADK,KACI,CAACR,EAAE,GAAG,CAACD,EAAE,GAAGQ,GAAG,CAACG,OAAV,MAAuB,IAAvB,IAA+BX,EAAE,KAAK,KAAK,CAA3C,GAA+C,KAAK,CAApD,GAAwDA,EAAE,CAACY,QAAjE,MAA+E,IAA/E,IAAuFX,EAAE,KAAK,KAAK,CAAnG,GAAuG,KAAK,CAA5G,GAAgHA,EAAE,CAACY,UADvH,MACuI,CAACX,EAAE,GAAGM,GAAG,CAACM,QAAV,MAAwB,IAAxB,IAAgCZ,EAAE,KAAK,KAAK,CAA5C,GAAgD,KAAK,CAArD,GAAyDA,EAAE,CAACO,IADnM,MAC6M,CAACJ,EAAE,GAAG,CAACD,EAAE,GAAG,CAACD,EAAE,GAAGK,GAAG,CAACM,QAAV,MAAwB,IAAxB,IAAgCX,EAAE,KAAK,KAAK,CAA5C,GAAgD,KAAK,CAArD,GAAyDA,EAAE,CAACQ,OAAlE,MAA+E,IAA/E,IAAuFP,EAAE,KAAK,KAAK,CAAnG,GAAuG,KAAK,CAA5G,GAAgHA,EAAE,CAACQ,QAAzH,MAAuI,IAAvI,IAA+IP,EAAE,KAAK,KAAK,CAA3J,GAA+J,KAAK,CAApK,GAAwKA,EAAE,CAACQ,UADxX,CAAb;;AAEA,QAAIJ,IAAI,KAAK,GAAT,IAAgBA,IAAI,KAAK,GAA7B,EAAkC;AAC9B,YAAMD,GAAN;AACH;;AACDT,IAAAA,EAAE,CAACgB,KAAH,GAAWP,GAAX;AACH;;AACD;AACH;;AACD,MAAMb,aAAN,CAAoB;AAChBqB,EAAAA,WAAW,CAACC,OAAD,EAAU;AACjB,SAAKC,KAAL,GAAa,IAAItB,OAAO,CAACuB,KAAZ,CAAkB7B,MAAM,CAAC8B,MAAP,CAAc9B,MAAM,CAAC8B,MAAP,CAAc,EAAd,EAAkBH,OAAlB,CAAd,EAA0C;AAAEnB,MAAAA;AAAF,KAA1C,CAAlB,CAAb;AACH;;AACQ,QAAHuB,GAAG,CAACd,IAAD,EAAO;AACZ,UAAMR,EAAE,GAAG;AAAEQ,MAAAA;AAAF,KAAX;AACA,UAAM,KAAKW,KAAL,CAAWG,GAAX,CAAetB,EAAf,CAAN;;AACA,QAAIA,EAAE,CAACgB,KAAP,EAAc;AACV,YAAMhB,EAAE,CAACgB,KAAT;AACH;;AACD,WAAOhB,EAAE,CAACO,MAAV;AACH;;AAXe;;AAapBd,OAAO,CAACG,aAAR,GAAwBA,aAAxB;;AACA,MAAMD,cAAN,CAAqB;AACjB2B,EAAAA,GAAG,CAACd,IAAD,EAAO;AACN,WAAOA,IAAI,EAAX;AACH;;AAHgB;;AAKrBf,OAAO,CAACE,cAAR,GAAyBA,cAAzB","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InlineExecutor = exports.QueueExecutor = void 0;\nconst queue_1 = require(\"../../../throttler/queue\");\nasync function handler(op) {\n    var _a, _b, _c, _d, _e, _f;\n    try {\n        op.result = await op.func();\n    }\n    catch (err) {\n        const code = err.status ||\n            err.code || ((_b = (_a = err.context) === null || _a === void 0 ? void 0 : _a.response) === null || _b === void 0 ? void 0 : _b.statusCode) || ((_c = err.original) === null || _c === void 0 ? void 0 : _c.code) || ((_f = (_e = (_d = err.original) === null || _d === void 0 ? void 0 : _d.context) === null || _e === void 0 ? void 0 : _e.response) === null || _f === void 0 ? void 0 : _f.statusCode);\n        if (code === 429 || code === 409) {\n            throw err;\n        }\n        op.error = err;\n    }\n    return;\n}\nclass QueueExecutor {\n    constructor(options) {\n        this.queue = new queue_1.Queue(Object.assign(Object.assign({}, options), { handler }));\n    }\n    async run(func) {\n        const op = { func };\n        await this.queue.run(op);\n        if (op.error) {\n            throw op.error;\n        }\n        return op.result;\n    }\n}\nexports.QueueExecutor = QueueExecutor;\nclass InlineExecutor {\n    run(func) {\n        return func();\n    }\n}\nexports.InlineExecutor = InlineExecutor;\n"]},"metadata":{},"sourceType":"script"}